
{% load static %}
<style>
.fila-rojo {
    background-color: #f8d7da !important;  /* rojo claro */
}
.fila-amarillo {
    background-color: #fff3cd !important;  /* amarillo claro */
}
.fila-verde {
    background-color: #d4edda !important;  /* verde claro */
}

#facturar_modal input.form-control,
#facturar_modal select.form-control,
#facturar_modal textarea.form-control {
    padding: 2px 6px;
    height: 26px;
    font-size: 0.8rem;
}

#facturar_modal label {
    font-size: 0.8rem;
    margin-bottom: 2px;
}

#facturar_modal .btn {
    padding: 4px 10px;
    font-size: 0.8rem;
}

#facturar_modal .form-group {
    margin-bottom: 6px;
}

#facturar_modal .form-row {
    margin-bottom: 8px;
}

#facturar_modal table.table th,
#facturar_modal table.table td {
    font-size: 0.8rem;
    padding: 4px 8px;
}

#segundo_grupo {
    margin-top: 5%;
}
#segundo_grupo button {
    padding: 4px 10px;
    font-size: 0.8rem;
}

  .tabla-scroll {
    max-height: 800px;
    overflow-y: auto;
    display: block;
  }
</style>

<div id="facturar_modal" style="display:none;">
  <form id="facturar_form" method="post">

    <div class="container mt-3">
       <!-- Fila principal distribuida -->
    <div class="form-row" style="display:flex; justify-content:space-between; align-items:flex-end; width:100%; gap: 10px; flex-wrap: wrap;">

      <div class="form-group" style="display:flex; align-items:flex-end; gap: 5px;">
        <label for="destinatario"><b>Destinatario de facturaci√≥n</b></label>
        <input type="hidden" class="form-control" id="destinatario_input" style="width:30px;" readonly>
        <input class="form-control" type="text" name="destinatario" id="destinatario">
      </div>
<!--
      <div class="form-group" style="display:flex; align-items:center; gap: 5px;">
        <label for="concepto_detalle">Concepto + detalle</label>
        <input type="checkbox" name="concepto_detalle" id="concepto_detalle">
      </div>
-->
      <div class="form-group d-flex" style="display:flex; gap:6px; flex-wrap:wrap;">
        <button type="button" class="btn btn-sm btn-outline-primary" onclick="asignar_costo()" id="facturar_a">Facturar a..</button>
        <button type="button" class="btn btn-sm btn-outline-primary" onclick="asignar_costo_todos()" id="facturar_todos">Facturar a todos</button>
        <button type="button" class="btn btn-sm btn-outline-danger" onclick="asignar_no()" id="no_facturar">No facturar</button>
        <button type="button" class="btn btn-sm btn-outline-danger" onclick="asignar_no_todos()" id="ninguno">No facturar a ninguno</button>
      </div>

    </div>

    <!-- Grupo inferior: total + botones -->
    <div class="form-row mt-3" style="display:flex; justify-content:space-between; align-items:flex-end; width:100%;  flex-wrap: wrap; gap: 10px;">

      <div class="form-group">
        <label for="total_ingresos"><b>Total de ingresos</b></label>
        <input class="form-control" type="number" name="total_ingresos" id="total_ingresos" readonly>
      </div>

      <div id="segundo_grupo" class="form-group d-flex" style="display:flex; gap:6px; flex-wrap:wrap;">
        <button type="button" class="btn btn-secondary" id="excel_factura">Excel</button>
        <button type="button" class="btn btn-secondary" id="orden_factura">Orden factura</button>
<!--        <button type="button" class="btn btn-warning" onclick="enviarDatosTabla()" id="enviar_factura">Enviar</button>-->
      </div>

    </div>

    </div>

    <!-- Tabla -->
    <div class="container mt-4" style="overflow-x:auto;">
      <h3>Concepto de ingresos</h3>
        <div style="margin-bottom: 8px;">
    <button type="button" class="btn btn-sm btn-outline-primary" id="seleccionar_todos">
      Seleccionar todos
    </button>
  </div>

      <table id="facturar_table" class="table table-striped tabla-scroll">
        <thead>
          <tr>
            <th>Seleccionar</th>
            <th>Concepto</th>
            <th>Tipo</th>
            <th>Cantidad</th>
            <th>Facturar a..</th>
            <th>Moneda</th>
            <th>Arbitraje</th>
            <th>Detalle</th>
            <th>Concepto + Detalle</th>
            <th>Factura</th>
          </tr>
        </thead>
      </table>
    </div>

  </form>
</div>
<script>
    var csrf_token = "{{ csrf_token }}";
</script>
